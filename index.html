<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>@rp_gupta_07 | Friends Arena</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<style>
:root { --primary: #00f2ff; --bg: #0a0a12; --card: #161625; }
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin: 0; background: var(--bg); color: #fff; font-family: sans-serif; overflow: hidden; }

.app { max-width: 450px; margin: auto; height: 100vh; display: flex; flex-direction: column; }

/* Login/Room Screen */
#setupScreen { position: absolute; inset: 0; background: var(--bg); z-index: 200; padding: 30px; display: flex; flex-direction: column; justify-content: center; }
.input-group { margin-bottom: 15px; }
input { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #333; background: #1a1a2e; color: #fff; outline: none; }
.btn-main { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--primary); color: #000; font-weight: bold; cursor: pointer; }

/* Game Section */
#gameArea { flex: 1; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #000; }
canvas { background: #111; border: 2px solid #222; border-radius: 10px; max-width: 95%; touch-action: none; }
.game-nav { width: 100%; padding: 10px; display: flex; justify-content: space-between; font-size: 12px; }

/* Friends Chat Section */
.chat-box { height: 220px; background: #0f0f1a; display: flex; flex-direction: column; border-top: 2px solid #222; }
#msgList { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 5px; }
.msg { padding: 8px 12px; border-radius: 12px; font-size: 12px; max-width: 80%; }
.msg.me { align-self: flex-end; background: var(--primary); color: #000; }
.msg.other { align-self: flex-start; background: #2a2a3a; }
.chat-input { display: flex; padding: 10px; gap: 5px; background: #05050a; }

#menu { position: absolute; inset: 0; background: rgba(0,0,0,0.9); z-index: 100; display: none; grid-template-columns: 1fr 1fr; gap: 10px; padding: 20px; align-content: center; }
.game-card { background: var(--card); padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; }
</style>
</head>
<body>

<div class="app">
    <div id="setupScreen">
        <h2 style="text-align:center">ELITE ARENA</h2>
        <div class="input-group"><input id="userName" placeholder="Apna Naam"></div>
        <div class="input-group"><input id="roomID" placeholder="Room ID (Dost ko bhi yahi do)"></div>
        <button class="btn-main" onclick="joinArena()">ARENA JOIN KAREIN</button>
        <p style="font-size:10px; text-align:center; margin-top:20px; color:#555">@RP_GUPTA_07</p>
    </div>

    <div id="gameArea">
        <div class="game-nav">
            <span>Room: <b id="roomDisplay">--</b></span>
            <span id="score">Score: 0</span>
            <span onclick="toggleMenu()" style="color:var(--primary); cursor:pointer">GAMES ‚ò∞</span>
        </div>
        
        <div id="menu">
            <div class="game-card" onclick="start('DINO')">ü¶ñ Dino</div>
            <div class="game-card" onclick="start('SNAKE')">üêç Snake</div>
            <div class="game-card" onclick="start('PONG')">üèì Pong</div>
            <div class="game-card" onclick="toggleMenu()">‚ùå Close</div>
        </div>

        <canvas id="stage" width="300" height="300"></canvas>
    </div>

    <div class="chat-box">
        <div id="msgList"></div>
        <div class="chat-input">
            <input id="chatInp" placeholder="Dost se baat karein...">
            <button onclick="sendMsg()" style="background:var(--primary); border:none; padding:10px; border-radius:5px">‚û§</button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// Firebase Config
const conf = { apiKey: "AIzaSyARuO_pN2vdYrVKYkKHHaNys7WI8HqM6I4", databaseURL: "https://friendchat-43941-default-rtdb.firebaseio.com" };
firebase.initializeApp(conf);
const rtdb = firebase.database();

let myName, myRoom, chatRef, active = false, gType = "";
const cvs = document.getElementById('stage'), ctx = cvs.getContext('2d');

function joinArena() {
    myName = document.getElementById('userName').value.trim();
    myRoom = document.getElementById('roomID').value.trim();
    if(!myName || !myRoom) return alert("Naam aur Room ID zaroori hai!");

    document.getElementById('setupScreen').style.display = "none";
    document.getElementById('roomDisplay').innerText = myRoom;
    document.getElementById('menu').style.display = "grid";

    chatRef = rtdb.ref("rooms/" + myRoom + "/chat");
    listenChat();
}

function sendMsg() {
    const inp = document.getElementById('chatInp');
    if(inp.value.trim()) { chatRef.push({ n: myName, m: inp.value }); inp.value = ""; }
}

function listenChat() {
    chatRef.on("child_added", s => {
        const d = s.val();
        const div = document.createElement('div');
        div.className = `msg ${d.n === myName ? 'me' : 'other'}`;
        div.innerHTML = `<b>${d.n}:</b> ${d.m}`;
        document.getElementById('msgList').appendChild(div);
        document.getElementById('msgList').scrollTop = 9999;
    });
}

function toggleMenu() { document.getElementById('menu').style.display = (document.getElementById('menu').style.display === "grid") ? "none" : "grid"; }

// Games Logic
let dinoY = 250, dinoV = 0, obs = [], score = 0;

function start(type) {
    toggleMenu();
    active = true; gType = type; score = 0; obs = [];
    if(type === 'DINO') { dinoY = 250; dinoV = 0; }
    gameLoop();
}

function gameLoop() {
    if(!active) return;
    ctx.clearRect(0,0,300,300);
    document.getElementById('score').innerText = "Score: " + score;

    if(gType === 'DINO') {
        dinoV += 0.8; dinoY += dinoV;
        if(dinoY > 250) { dinoY = 250; dinoV = 0; }
        ctx.fillStyle = "#00f2ff"; ctx.fillRect(40, dinoY, 25, 25);
        
        if(Math.random() < 0.02) obs.push({x:320});
        obs.forEach((o, i) => {
            o.x -= 6;
            ctx.fillStyle = "red"; ctx.fillRect(o.x, 260, 15, 15);
            if(o.x < 65 && o.x > 40 && dinoY > 235) { active = false; alert("Game Over! Score: " + score); }
            if(o.x < -20) { obs.splice(i, 1); score++; }
        });
    }
    requestAnimationFrame(gameLoop);
}

cvs.addEventListener('touchstart', () => { if(dinoY === 250) dinoV = -12; });
</script>
</body>
</html>

