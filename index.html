<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>@rp_gupta_07 | Elite Gaming Arena</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #00f2ff; --bg: #05050a; --card: #1a1a2e; }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: #fff; overflow: hidden; }
        
        .app-wrapper { max-width: 450px; margin: auto; height: 100vh; display: flex; flex-direction: column; position: relative; }

        /* Login Screen */
        #authScreen { position: absolute; inset: 0; background: var(--bg); z-index: 1000; padding: 40px 20px; display: flex; flex-direction: column; justify-content: center; }
        .auth-box { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #333; }
        input { width: 100%; padding: 15px; margin-bottom: 15px; border-radius: 10px; border: 1px solid #444; background: #111; color: #fff; outline: none; }
        .btn-join { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--primary); color: #000; font-weight: 900; cursor: pointer; font-size: 16px; }

        /* Game Section */
        #mainContent { flex: 1; display: flex; flex-direction: column; overflow: hidden; display: none; }
        .top-info { padding: 10px; background: #111; display: flex; justify-content: space-between; font-size: 12px; border-bottom: 1px solid #222; }
        
        #gameDisplay { flex: 1; position: relative; background: #000; overflow-y: auto; padding: 15px; }
        .game-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .game-item { background: var(--card); padding: 15px 5px; border-radius: 12px; text-align: center; cursor: pointer; border: 1px solid #333; transition: 0.2s; }
        .game-item:active { background: var(--primary); color: #000; }
        .game-icon { font-size: 24px; display: block; margin-bottom: 5px; }

        /* Chat Section */
        .chat-container { height: 230px; background: #0a0a15; display: flex; flex-direction: column; border-top: 1px solid #333; }
        #chatMsgs { flex: 1; overflow-y: auto; padding: 10px; font-size: 13px; display: flex; flex-direction: column; gap: 8px; }
        .msg-bubble { max-width: 80%; padding: 8px 12px; border-radius: 15px; line-height: 1.4; }
        .msg-me { align-self: flex-end; background: var(--primary); color: #000; }
        .msg-other { align-self: flex-start; background: #222; color: #fff; }
        .chat-bar { display: flex; padding: 10px; gap: 8px; background: #000; }
        .chat-bar input { margin: 0; flex: 1; padding: 10px; border-radius: 20px; }
        
        #canvasArea { position: absolute; inset: 0; background: #000; z-index: 500; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .close-game { position: absolute; top: 15px; right: 15px; color: red; font-weight: bold; cursor: pointer; font-size: 20px; }
    </style>
</head>
<body>

<div class="app-wrapper">
    <div id="authScreen">
        <div class="auth-box">
            <h1 style="text-align:center; color:var(--primary); margin:0 0 10px 0;">ARENA PRO</h1>
            <p style="text-align:center; font-size:10px; margin-bottom:25px; color:#888;">CREATED BY @RP_GUPTA_07</p>
            <input id="uName" type="text" placeholder="Apna Naam (eg: Ramprakash)">
            <input id="rCode" type="text" placeholder="Room ID (Dost wala same daalein)">
            <button class="btn-join" onclick="initApp()">JOIN ARENA</button>
        </div>
    </div>

    <div id="mainContent">
        <div class="top-info">
            <span>ROOM: <b id="outRoom">--</b></span>
            <span id="scoreText">Score: 0</span>
        </div>

        <div id="gameDisplay">
            <div id="canvasArea">
                <span class="close-game" onclick="closeGame()">‚úï</span>
                <canvas id="gameCanvas" width="300" height="300" style="background:#111; border:2px solid #333; border-radius:10px;"></canvas>
                <p id="gameInstr" style="font-size:12px; margin-top:10px; color:var(--primary);">TAP TO PLAY</p>
            </div>

            <div class="game-grid">
                <div class="game-item" onclick="launchGame('DINO')"><span class="game-icon">ü¶ñ</span>Dino</div>
                <div class="game-item" onclick="launchGame('CATCH')"><span class="game-icon">üçé</span>Catch</div>
                <div class="game-item" onclick="launchGame('SNAKE')"><span class="game-icon">üêç</span>Snake</div>
                <div class="game-item" onclick="launchGame('PONG')"><span class="game-icon">üèì</span>Pong</div>
                <div class="game-item" onclick="launchGame('BIRD')"><span class="game-icon">üê¶</span>Flappy</div>
                <div class="game-item" onclick="launchGame('DODGE')"><span class="game-icon">üöó</span>Dodge</div>
                <div class="game-item" onclick="launchGame('MATH')"><span class="game-icon">üî¢</span>Math</div>
                <div class="game-item" onclick="launchGame('SHOOT')"><span class="game-icon">üéØ</span>Shoot</div>
                <div class="game-item" onclick="launchGame('BOX')"><span class="game-icon">üì¶</span>Stack</div>
                <div class="game-item" onclick="launchGame('JUMP')"><span class="game-icon">üöÄ</span>Jump</div>
                <div class="game-item" onclick="launchGame('TAP')"><span class="game-icon">‚ö°</span>Fast Tap</div>
                <div class="game-item" onclick="launchGame('AVOID')"><span class="game-icon">üí£</span>Avoid</div>
                <div class="game-item" onclick="launchGame('GLOW')"><span class="game-icon">‚ú®</span>Glow</div>
                <div class="game-item" onclick="launchGame('TICTAC')"><span class="game-icon">‚ùå</span>TicTac</div>
                <div class="game-item" onclick="launchGame('MINE')"><span class="game-icon">üíé</span>Mines</div>
            </div>
        </div>

        <div class="chat-container">
            <div id="chatMsgs"></div>
            <div class="chat-bar">
                <input id="chatInp" type="text" placeholder="Message likhein...">
                <button onclick="sendMsg()" style="background:var(--primary); border:none; padding:10px 15px; border-radius:20px; font-weight:bold;">‚û§</button>
            </div>
        </div>
    </div>
</div>

<script>
    // Firebase Initialization
    const firebaseConfig = {
        apiKey: "AIzaSyARuO_pN2vdYrVKYkKHHaNys7WI8HqM6I4",
        databaseURL: "https://friendchat-43941-default-rtdb.firebaseio.com"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    let currentUser, currentRoom, chatRef, gameActive = false, currentGame = "", score = 0;
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // App Initialization
    function initApp() {
        currentUser = document.getElementById('uName').value.trim();
        currentRoom = document.getElementById('rCode').value.trim();

        if (currentUser && currentRoom) {
            document.getElementById('authScreen').style.display = "none";
            document.getElementById('mainContent').style.display = "flex";
            document.getElementById('outRoom').innerText = currentRoom;

            // Chat Listener
            chatRef = database.ref("rooms/" + currentRoom + "/chat");
            chatRef.on("child_added", (snap) => {
                const data = snap.val();
                const msgBox = document.getElementById('chatMsgs');
                const div = document.createElement('div');
                div.className = `msg-bubble ${data.user === currentUser ? 'msg-me' : 'msg-other'}`;
                div.innerHTML = `<small style="font-size:8px; display:block; opacity:0.7;">${data.user}</small>${data.msg}`;
                msgBox.appendChild(div);
                msgBox.scrollTop = msgBox.scrollHeight;
            });
        } else {
            alert("Bhai, Naam aur Room ID dono bharo!");
        }
    }

    function sendMsg() {
        const inp = document.getElementById('chatInp');
        if (inp.value.trim()) {
            chatRef.push({ user: currentUser, msg: inp.value });
            inp.value = "";
        }
    }

    // GAME LOGIC
    let pY = 250, pV = 0, obstacles = [];

    function launchGame(type) {
        document.getElementById('canvasArea').style.display = "flex";
        gameActive = true;
        currentGame = type;
        score = 0;
        obstacles = [];
        pY = 250; pV = 0;
        
        if(type === 'DINO') runDino();
        else if(type === 'CATCH') runCatch();
        else {
            ctx.clearRect(0,0,300,300);
            ctx.fillStyle = "white";
            ctx.fillText(type + " GAME STARTING...", 80, 150);
        }
    }

    function closeGame() {
        gameActive = false;
        document.getElementById('canvasArea').style.display = "none";
    }

    function runDino() {
        if(!gameActive) return;
        ctx.clearRect(0,0,300,300);
        
        // Physics
        pV += 0.8; pY += pV;
        if(pY > 250) { pY = 250; pV = 0; }
        
        // Draw Dino
        ctx.fillStyle = "#00f2ff";
        ctx.fillRect(40, pY, 25, 25);
        
        // Obstacles
        if(Math.random() < 0.02) obstacles.push({x:320});
        obstacles.forEach((ob, i) => {
            ob.x -= 6;
            ctx.fillStyle = "red";
            ctx.fillRect(ob.x, 255, 15, 20);
            
            // Collision
            if(ob.x < 65 && ob.x > 40 && pY > 230) {
                gameActive = false;
                alert("Game Over! Score: " + score);
                closeGame();
            }
            if(ob.x < -20) { obstacles.splice(i, 1); score++; document.getElementById('scoreText').innerText = "Score: " + score; }
        });
        
        requestAnimationFrame(runDino);
    }

    // Basic Touch to Jump
    canvas.addEventListener('touchstart', (e) => {
        if(currentGame === 'DINO' && pY === 250) pV = -12;
    });
</script>
</body>
</html>
