<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>RP_GUPTA_07 | LEGENDARY ARENA</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

    <style>
        :root { --neon: #00f2ff; --pink: #ff0055; --gold: #ffcc00; --bg: #020205; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Rajdhani', sans-serif; overflow: hidden; height: 100vh; }

        /* Layers */
        .layer { position: fixed; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px; z-index: 10; background: var(--bg); }
        .active { display: flex; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(1.1); } to { opacity: 1; transform: scale(1); } }

        /* UI Elements */
        .profile-img { width: 130px; height: 130px; border-radius: 50%; border: 3px solid var(--neon); box-shadow: 0 0 30px var(--neon); margin-bottom: 15px; }
        .loader-box { width: 250px; height: 6px; background: #111; border-radius: 10px; margin: 20px 0; overflow: hidden; border: 1px solid #333; }
        .bar { width: 0%; height: 100%; background: var(--neon); box-shadow: 0 0 15px var(--neon); transition: 1.8s ease; }
        .btn { padding: 16px 40px; border: none; border-radius: 12px; background: var(--neon); color: #000; font-family: 'Syncopate'; font-size: 11px; font-weight: 900; cursor: pointer; box-shadow: 0 0 20px rgba(0,242,255,0.4); }

        /* Board */
        .board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; width: 100%; max-width: 320px; }
        .cell { aspect-ratio: 1/1; background: rgba(255,255,255,0.03); border: 1px solid #222; border-radius: 18px; display: flex; align-items: center; justify-content: center; font-size: 50px; font-weight: 700; transition: 0.3s; }
        .cell.x { color: var(--neon); text-shadow: 0 0 20px var(--neon); }
        .cell.o { color: var(--pink); text-shadow: 0 0 20px var(--pink); }

        /* Winning Animation */
        .winner-cell { border: 2px solid var(--gold) !important; box-shadow: 0 0 40px var(--gold); animation: pulse 1s infinite alternate; }
        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.05); } }

        /* Victory Overlay */
        .victory-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; text-align: center; }
        .victory-name { font-family: 'Syncopate'; font-size: 35px; margin-bottom: 20px; animation: glitch 0.4s infinite; }
        .winner-x { color: var(--neon); text-shadow: 0 0 30px var(--neon); }
        .winner-o { color: var(--pink); text-shadow: 0 0 30px var(--pink); }
        @keyframes glitch { 0%, 100% { transform: translate(0); } 20% { transform: translate(-2px, 2px); } 40% { transform: translate(2px, -2px); } }

        /* Settings */
        .settings-btn { position: fixed; top: 20px; right: 20px; font-size: 24px; background: none; border: none; color: #555; z-index: 50; }
        .settings-panel { position: fixed; right: -300px; top: 0; bottom: 0; width: 260px; background: #0a0a0f; z-index: 100; padding: 60px 20px; transition: 0.4s; border-left: 1px solid #333; }
        .settings-panel.open { right: 0; }
    </style>
</head>
<body>

<div id="vOver" class="victory-overlay">
    <h1 id="vName" class="victory-name">WINNER</h1>
    <button class="btn" onclick="closeV()">PLAY AGAIN</button>
</div>

<button class="settings-btn" onclick="tSet()">⚙️</button>
<div id="sPan" class="settings-panel">
    <h2 style="font-family:'Syncopate'; font-size:15px">SETTINGS</h2>
    <div style="margin-top:30px; display:flex; justify-content:space-between">
        <span>IMPOSSIBLE AI</span>
        <input type="checkbox" id="impMode">
    </div>
    <button class="btn" onclick="tSet()" style="margin-top:50px; width:100%">CLOSE</button>
</div>

<div id="L1" class="layer active">
    <img src="https://github.com/rp_gupta.png" class="profile-img" onerror="this.src='https://via.placeholder.com/130'">
    <h1>RP_GUPTA_07</h1>
    <p style="color:var(--gold); letter-spacing:3px">SYSTEM OWNER</p>
    <button class="btn" onclick="go(2)" style="margin-top:20px">INITIALIZE</button>
</div>

<div id="L2" class="layer"><h1>BIO SCAN</h1><div class="loader-box"><div id="b2" class="bar"></div></div></div>
<div id="L3" class="layer"><h1>BREACHING</h1><div class="loader-box"><div id="b3" class="bar"></div></div></div>
<div id="L4" class="layer"><h1>AI SYNCING</h1><div class="loader-box"><div id="b4" class="bar"></div></div></div>

<div id="L5" class="layer">
    <div style="display:flex; gap:40px; margin-bottom:30px">
        <div style="text-align:center">OWNER<br><b id="wS" style="color:var(--neon); font-size:25px">0</b></div>
        <div style="text-align:center">AI<br><b id="lS" style="color:var(--pink); font-size:25px">0</b></div>
    </div>
    <h2 id="status" style="font-size:14px; letter-spacing:2px; color:#888">YOUR TURN</h2>
    <div class="board" id="grid"></div>
    <button class="btn" onclick="reset()" style="margin-top:30px; background:none; border:1px solid var(--neon); color:var(--neon)">REBOOT</button>
</div>

<script>
    let board = Array(9).fill("");
    let over = false;
    let score = { w:0, l:0 };

    function tSet() { document.getElementById('sPan').classList.toggle('open'); }

    function go(n) {
        document.querySelectorAll('.layer').forEach(l => l.classList.remove('active'));
        document.getElementById('L'+n).classList.add('active');
        if(n >= 2 && n <= 4) {
            setTimeout(() => {
                document.getElementById('b'+n).style.width = "100%";
                setTimeout(() => go(n+1), 2000);
            }, 100);
        }
        if(n === 5) start();
    }

    function start() {
        const g = document.getElementById('grid');
        g.innerHTML = ''; board = Array(9).fill(""); over = false;
        for(let i=0; i<9; i++) {
            let c = document.createElement('div');
            c.className = 'cell';
            c.onclick = () => tap(i);
            g.appendChild(c);
        }
    }

    function tap(i) {
        if(board[i] || over) return;
        play(i, "X");
        if(!over) {
            document.getElementById('status').innerText = "AI THINKING...";
            setTimeout(bot, 600);
        }
    }

    function play(i, s) {
        board[i] = s;
        const c = document.getElementById('grid').children[i];
        c.innerText = s; c.classList.add(s.toLowerCase());
        if(window.navigator.vibrate) window.navigator.vibrate(30);
        let win = check(s);
        if(win) return end(s, win);
        if(!board.includes("")) return end("draw");
    }

    function bot() {
        if(over) return;
        let imp = document.getElementById('impMode').checked;
        let m = (imp ? find("O") || find("X") || (board[4]===""?4:null) : null) || find("O") || find("X") || rand();
        play(m, "O");
        document.getElementById('status').innerText = "YOUR TURN";
    }

    function find(s) {
        const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        for(let l of lines) {
            let v = l.map(idx => board[idx]);
            if(v.filter(x => x===s).length===2 && v.includes("")) return l[v.indexOf("")];
        }
        return null;
    }

    function rand() {
        let a = board.map((v,i) => v===""?i:null).filter(v=>v!==null);
        return a[Math.floor(Math.random()*a.length)];
    }

    function check(s) {
        const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        return lines.find(l => l.every(i => board[i] === s));
    }

    function end(res, pat) {
        over = true;
        const vO = document.getElementById('vOver');
        const vN = document.getElementById('vName');
        if(res === "X") {
            vN.innerText = "RP_GUPTA_07"; vN.className = "victory-name winner-x";
            score.w++; confetti();
        } else if(res === "O") {
            vN.innerText = "AI DOMINATED"; vN.className = "victory-name winner-o";
            score.l++;
        } else { vN.innerText = "DRAW"; vN.className = "victory-name"; }
        
        if(pat) pat.forEach(idx => document.getElementById('grid').children[idx].classList.add('winner-cell'));
        document.getElementById('wS').innerText = score.w;
        document.getElementById('lS').innerText = score.l;
        setTimeout(() => vO.style.display = 'flex', 1000);
    }

    function closeV() { document.getElementById('vOver').style.display = 'none'; start(); }
    function reset() { start(); }
</script>
</body>
</html>

