<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>@rp_gupta_07 | Elite Arena Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
/* ... (पुराने सारे CSS स्टाइल वैसे ही रहेंगे) ... */
:root { --primary: #00f2ff; --secondary: #7000ff; --bg: #050505; --win: #00ff88; }
body { background: var(--bg); color: #fff; font-family: sans-serif; margin: 0; overflow: hidden; }
.screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; padding: 20px; }
input { width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 10px; border: none; background: #15151b; color: #fff; }
.btn-main { width: 100%; padding: 15px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; margin-bottom: 10px; }
.btn-primary { background: var(--primary); color: #000; }
.hidden { display: none !important; }

/* Admin Panel Specific Style */
#adminPanel { 
    position: fixed; inset: 0; background: #000; z-index: 10000; 
    padding: 20px; overflow-y: auto; color: #fff;
}
.room-card { 
    background: #111; border: 1px solid var(--primary); 
    padding: 15px; border-radius: 12px; margin-bottom: 15px; 
}
.admin-chat-box { 
    background: #050505; height: 100px; overflow-y: auto; 
    font-size: 10px; padding: 5px; border-radius: 5px; margin-top: 10px;
}
</style>
</head>
<body>

<div id="adminPanel" class="hidden">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2 style="color:var(--primary); margin:0;">MASTER ADMIN DASHBOARD</h2>
        <button onclick="location.reload()" style="background:red; color:#fff; border:none; padding:5px 10px; border-radius:5px;">LOGOUT</button>
    </div>
    <div id="activeRoomsList">
        <p>सिस्टम स्कैन कर रहा है... कृपया रुकें।</p>
    </div>
</div>

<div id="loginScreen" class="screen">
    <h1 style="font-size:40px; margin:0;">ULTIMATE</h1>
    <h1 style="color:var(--primary); margin-top:-10px;">ARENA PRO</h1>
    <p style="font-size:10px; color:#555;">CREATED BY @RP_GUPTA_07</p>
    
    <div style="width:100%; margin-top:20px;">
        <input id="userName" placeholder="ENTER PLAYER NAME">
        <button class="btn-main btn-primary" onclick="checkAdminOrStart()">START ARENA</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// Firebase config (आपकी वही पुरानी वाली)
const firebaseConfig = {
  apiKey: "AIzaSyARuO_pN2vdYrVKYkKHHaNys7WI8HqM6I4",
  databaseURL: "https://friendchat-43941-default-rtdb.firebaseio.com",
  projectId: "friendchat-43941"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function checkAdminOrStart() {
    let name = document.getElementById("userName").value.trim();
    if (name === "RP_ADMIN_7") {
        openAdminDashboard();
    } else {
        // सामान्य गेम शुरू करने का फंक्शन यहाँ कॉल करें
        alert("आपका नाम एडमिन नहीं है, सामान्य गेम शुरू हो रहा है।");
    }
}

function openAdminDashboard() {
    document.getElementById("loginScreen").classList.add("hidden");
    document.getElementById("adminPanel").classList.remove("hidden");
    
    // सभी रूम्स का डेटा फेच करना
    db.ref("rooms").on("value", (snapshot) => {
        const listContainer = document.getElementById("activeRoomsList");
        listContainer.innerHTML = "";
        const allRooms = snapshot.val();
        
        if (!allRooms) {
            listContainer.innerHTML = "<p>अभी कोई भी रूम एक्टिव नहीं है।</p>";
            return;
        }

        for (let roomId in allRooms) {
            let roomData = allRooms[roomId];
            let players = roomData.game ? roomData.game.players : {X: 'Unknown', O: 'Unknown'};
            let chats = roomData.chat ? Object.values(roomData.chat) : [];

            let card = document.createElement("div");
            card.className = "room-card";
            card.innerHTML = `
                <div style="font-weight:bold; color:var(--primary);">ROOM ID: ${roomId}</div>
                <div style="font-size:12px;">खिलाड़ी: ${players.X} vs ${players.O}</div>
                <div class="admin-chat-box" id="chat-${roomId}">
                    ${chats.map(m => `<div><b>${m.n}:</b> ${m.m}</div>`).join('')}
                </div>
                <button onclick="deleteRoom('${roomId}')" style="margin-top:10px; background:#ff0055; color:white; border:none; padding:5px; border-radius:5px; width:100%; font-size:10px;">ROOM डिलीट करें</button>
            `;
            listContainer.appendChild(card);
        }
    });
}

function deleteRoom(id) {
    if(confirm("क्या आप वाकई इस रूम और उसकी चैट्स को डिलीट करना चाहते हैं?")) {
        db.ref("rooms/" + id).remove();
    }
}
</script>
</body>
</html>
