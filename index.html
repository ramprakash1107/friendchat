<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>RP_GUPTA_07 | CYBER ARENA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --neon: #00f2ff;
            --bg: #08080a;
            --card: #121217;
            --accent: #ff0055;
        }

        body {
            margin: 0; background: var(--bg); color: white;
            font-family: 'Orbitron', sans-serif; overflow: hidden;
        }

        /* Animated Background */
        .grid-bg {
            position: fixed; inset: 0;
            background-image: linear-gradient(to right, #1a1a2e 1px, transparent 1px),
                              linear-gradient(to bottom, #1a1a2e 1px, transparent 1px);
            background-size: 40px 40px; transform: perspective(500px) rotateX(60deg);
            transform-origin: center bottom; z-index: -1; animation: move-bg 3s linear infinite;
        }

        @keyframes move-bg { from { background-position: 0 0; } to { background-position: 0 40px; } }

        .container { max-width: 400px; margin: auto; height: 100vh; display: flex; flex-direction: column; padding: 20px; }

        h1 { text-align: center; font-size: 28px; text-shadow: 0 0 10px var(--neon); color: var(--neon); margin: 10px 0; }

        .scoreboard {
            display: flex; justify-content: space-around; background: var(--card);
            padding: 15px; border-radius: 15px; border: 1px solid #333; margin-bottom: 20px;
        }

        .board {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
            background: rgba(255,255,255,0.02); padding: 10px; border-radius: 20px;
        }

        .cell {
            aspect-ratio: 1/1; background: var(--card); border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 45px; font-weight: 900; border: 1px solid #222;
            transition: 0.2s; cursor: pointer;
        }

        .cell:hover { border-color: var(--neon); box-shadow: 0 0 15px var(--neon); }
        .cell.x { color: var(--neon); text-shadow: 0 0 15px var(--neon); }
        .cell.o { color: var(--accent); text-shadow: 0 0 15px var(--accent); }

        .btn {
            background: linear-gradient(45deg, var(--neon), var(--accent));
            border: none; padding: 15px; border-radius: 12px; color: white;
            font-weight: bold; margin-top: 20px; cursor: pointer; text-transform: uppercase;
        }

        #overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100;
        }
    </style>
</head>
<body>

<div class="grid-bg"></div>

<div class="container">
    <h1>CYBER ARENA PRO</h1>
    
    <div class="scoreboard">
        <div>YOU: <span id="pScore">0</span></div>
        <div>DRAW: <span id="dScore">0</span></div>
        <div>BOT: <span id="bScore">0</span></div>
    </div>

    <div id="status" style="text-align: center; margin-bottom: 10px; font-size: 14px; color: #888;">READY TO FIGHT?</div>

    <div class="board" id="board"></div>

    <button class="btn" onclick="resetGame()">RESTART MATCH</button>
    <p style="text-align: center; font-size: 10px; color: #555; margin-top: 20px;">@rp_gupta_07 EDITION</p>
</div>

<div id="overlay">
    <h2 id="winMsg" style="font-size: 40px;"></h2>
    <button class="btn" onclick="closeOverlay()" style="width: 200px;">CONTINUE</button>
</div>

<script>
    let board = Array(9).fill("");
    let scores = { p: 0, b: 0, d: 0 };
    let isGameOver = false;

    function init() {
        const boardEl = document.getElementById('board');
        boardEl.innerHTML = '';
        for(let i=0; i<9; i++) {
            let c = document.createElement('div');
            c.className = 'cell';
            c.onclick = () => playerMove(i);
            boardEl.appendChild(c);
        }
    }

    function playerMove(i) {
        if(board[i] || isGameOver) return;
        makeMove(i, "X");
        if(!isGameOver) {
            document.getElementById('status').innerText = "BOT IS SCANNING...";
            setTimeout(botMove, 500);
        }
    }

    function makeMove(i, sym) {
        board[i] = sym;
        const cell = document.getElementById('board').children[i];
        cell.innerText = sym;
        cell.classList.add(sym.toLowerCase());
        
        if (window.navigator.vibrate) window.navigator.vibrate(50); // Haptic feedback

        if(checkWin(sym)) return endGame(sym);
        if(!board.includes("")) return endGame("draw");
    }

    function botMove() {
        // Advanced Logic: 1. Win, 2. Block, 3. Random
        let move = findBest(board, "O") || findBest(board, "X") || randomMove();
        makeMove(move, "O");
        document.getElementById('status').innerText = "YOUR TURN";
    }

    function findBest(b, sym) {
        const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        for(let l of lines) {
            let vals = l.map(idx => b[idx]);
            if(vals.filter(v => v === sym).length === 2 && vals.includes("")) {
                return l[vals.indexOf("")];
            }
        }
        return null;
    }

    function randomMove() {
        let empty = board.map((v, i) => v === "" ? i : null).filter(v => v !== null);
        return empty[Math.floor(Math.random() * empty.length)];
    }

    function checkWin(sym) {
        const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        return lines.some(l => l.every(i => board[i] === sym));
    }

    function endGame(res) {
        isGameOver = true;
        const msg = document.getElementById('winMsg');
        if(res === "X") {
            msg.innerText = "YOU DEFEATED BOT!";
            msg.style.color = "var(--neon)";
            scores.p++;
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        } else if(res === "O") {
            msg.innerText = "BOT DOMINATED!";
            msg.style.color = "var(--accent)";
            scores.b++;
        } else {
            msg.innerText = "SYSTEM DRAW";
            msg.style.color = "#888";
            scores.d++;
        }
        updateScore();
        setTimeout(() => { document.getElementById('overlay').style.display = 'flex'; }, 600);
    }

    function updateScore() {
        document.getElementById('pScore').innerText = scores.p;
        document.getElementById('bScore').innerText = scores.b;
        document.getElementById('dScore').innerText = scores.d;
    }

    function resetGame() {
        board = Array(9).fill("");
        isGameOver = false;
        init();
    }

    function closeOverlay() {
        document.getElementById('overlay').style.display = 'none';
        resetGame();
    }

    init();
</script>

</body>
</html>
