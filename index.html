<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>@rp_gupta_07 | Elite Multi-Arena</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<style>
:root { 
    --primary: #00f2ff; --bg: #050505; --card: rgba(255, 255, 255, 0.08);
    --me: linear-gradient(135deg, #0084ff, #00c6ff);
}
body { 
    margin: 0; background: var(--bg); color: #fff; 
    font-family: 'Segoe UI', sans-serif; overflow: hidden;
}
.container { max-width: 450px; margin: auto; height: 100vh; display: flex; flex-direction: column; }

/* Game Section */
#gameStage { 
    flex: 1; background: #000; position: relative; 
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    border-bottom: 2px solid #222;
}
canvas { background: #111; border: 1px solid var(--primary); max-width: 90%; cursor: pointer; }
.game-ui { position: absolute; top: 10px; width: 90%; display: flex; justify-content: space-between; font-weight: bold; }

/* Chat Section */
.chat-area { height: 250px; display: flex; flex-direction: column; background: #0a0a0a; }
#messages { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
.msg { max-width: 80%; padding: 8px 12px; border-radius: 15px; font-size: 12px; line-height: 1.4; position: relative; }
.msg b { display: block; font-size: 8px; margin-bottom: 2px; opacity: 0.7; text-transform: uppercase; }
.me { align-self: flex-end; background: var(--me); border-bottom-right-radius: 2px; }
.other { align-self: flex-start; background: #222; border-bottom-left-radius: 2px; }

.chat-input-area { display: flex; padding: 10px; gap: 8px; background: #000; }
input { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid #333; background: #111; color: #fff; outline: none; }
.send-btn { background: var(--primary); border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; font-weight: bold; }

/* Menu Overlay */
#menu { position: absolute; inset: 0; background: rgba(0,0,0,0.9); z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; }
.btn-play { background: var(--primary); color: #000; padding: 15px 40px; border-radius: 30px; border: none; font-weight: 900; margin: 10px; width: 200px; }
</style>
</head>
<body>

<div class="container">
    <div id="gameStage">
        <div id="menu">
            <h1 style="margin:0; font-size:32px;">ARENA PRO</h1>
            <p style="color:var(--primary); font-size:10px; letter-spacing:3px;">BY @RP_GUPTA_07</p>
            <input id="userName" placeholder="ENTER NAME TO CHAT" style="margin: 20px 0; max-width: 250px;">
            <button class="btn-play" onclick="startGame('DINO')">PLAY DINO RUN</button>
            <button class="btn-play" style="background:#fff" onclick="startGame('SHOOT')">PLAY SHOOTER</button>
        </div>

        <div class="game-ui">
            <span id="scoreVal">Score: 0</span>
            <span onclick="location.reload()" style="color:red; cursor:pointer;">EXIT</span>
        </div>
        <canvas id="canvas"></canvas>
    </div>

    <div class="chat-area">
        <div id="messages"></div>
        <div class="chat-input-area">
            <input id="msgInput" placeholder="Type message...">
            <button class="send-btn" onclick="sendMessage()">âž¤</button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyARuO_pN2vdYrVKYkKHHaNys7WI8HqM6I4",
  databaseURL: "https://friendchat-43941-default-rtdb.firebaseio.com",
  projectId: "friendchat-43941",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const chatRef = db.ref("global_chat");

// --- CHAT LOGIC ---
let myName = "Player";

function sendMessage() {
    const input = document.getElementById('msgInput');
    myName = document.getElementById('userName').value || "Guest";
    if(!input.value.trim()) return;
    
    chatRef.push({ name: myName, msg: input.value, time: Date.now() });
    input.value = "";
}

chatRef.limitToLast(20).on("child_added", (snap) => {
    const data = snap.val();
    const box = document.getElementById('messages');
    const div = document.createElement('div');
    div.className = `msg ${data.name === myName ? 'me' : 'other'}`;
    div.innerHTML = `<b>${data.name}</b>${data.msg}`;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
});

// --- GAME LOGIC (Built-in) ---
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = 300; canvas.height = 300;

let gameActive = false, score = 0, currentGame = "";
let dino = { y: 250, dy: 0, jump: -10, gravity: 0.6, grounded: true };
let obs = [];

function startGame(type) {
    myName = document.getElementById('userName').value || "Player";
    document.getElementById('menu').style.display = "none";
    gameActive = true; currentGame = type; score = 0; obs = [];
    loop();
}

function loop() {
    if(!gameActive) return;
    ctx.clearRect(0,0,300,300);
    document.getElementById('scoreVal').innerText = "Score: " + score;

    if(currentGame === "DINO") {
        // Dino Physics
        if(!dino.grounded) { dino.dy += dino.gravity; dino.y += dino.dy; }
        if(dino.y >= 250) { dino.y = 250; dino.grounded = true; }
        
        ctx.fillStyle = "#00f2ff"; ctx.fillRect(40, dino.y, 30, 30);
        
        if(Math.random() < 0.02) obs.push({x:300});
        ctx.fillStyle = "red";
        obs.forEach((o, i) => {
            o.x -= 4;
            ctx.fillRect(o.x, 260, 20, 20);
            if(o.x < 70 && o.x > 10 && dino.y > 230) { gameActive = false; alert("Over!"); location.reload(); }
            if(o.x < -20) { obs.splice(i,1); score++; }
        });
    }
    requestAnimationFrame(loop);
}

// Controls
canvas.addEventListener('touchstart', () => { if(dino.grounded) { dino.dy = dino.jump; dino.grounded = false; }});
window.addEventListener('keydown', (e) => { if(e.code === "Space" && dino.grounded) { dino.dy = dino.jump; dino.grounded = false; }});
</script>
</body>
</html>
